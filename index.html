<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Invaders</title>
    <script src="joy.js"></script>
    <!-- Option 1: Include in HTML -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- Option 1: Include in HTML -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.2.2/font/bootstrap-icons.css">
    
    <style>
       #div1 {
           position: absolute;
           background: url('airplane.svg');
           background-repeat: no-repeat;
           background-size: contain;
           width: 30px;
           height: 30px;
       }
       .obstacle {
           position: absolute;
           background: url('0-circle.svg');
           background-repeat: no-repeat;
           background-size: contain;
           width: 30px;
           height: 30px;
       }
       div#joyDiv{
        width: 200px;
    height: 200px;
    margin-bottom: 20px;
    touch-action: none;
    position: absolute;
    top: 75%;
    right: 1%;
       }
    </style>
</head>
<body>
    
    <div id="joyDiv" style="width: 200px; height: 200px; margin-bottom: 20px;"></div>
    <div id="div1">
        
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            var joy1 = new JoyStick('joyDiv', {}, function (stickData) {
                // Your JoyStick code here
            });
    
            setInterval(function () {
                var div = $('#div1');
                var div1top = parseInt(div.css('top')) - 100;
                var div1left = parseInt(div.css('left')) - 100;
                var div1top1 = parseInt(div.css('top'));
                var div1left1 = parseInt(div.css('left'));
                var div1Width = div.width();
                var div1Height = div.height();
                
                //console.log($(window).height()+200);

                // Calculate the new position
                var newTop = div1top + joy1.GetPosY();
                var newLeft = div1left + joy1.GetPosX();
                //console.log(newTop);
    
                // Check if the new position is within the bounds of the screen
                if (
                    newTop >= 0 &&
                    newLeft >= 0 &&
                    newTop + div1Height <= $(window).height() &&
                    newLeft + div1Width <= $(window).width()
                ) {
                    // Update the airplane position only if it's within the bounds
                    div.css('top', newTop);
                    div.css('left', newLeft);
                }
    
                // Check for collision with obstacles
                $('.obstacle').each(function () {
                    var obstacle = $(this);
                    var obstacleTop = obstacle.position().top;
                    var obstacleLeft = obstacle.position().left;
                    var obstacleWidth = obstacle.width();
                    var obstacleHeight = obstacle.height();
    
                    if (
                        div1top1 + div1Height > obstacleTop &&
                        div1top1 < obstacleTop + obstacleHeight &&
                        div1left1 + div1Width > obstacleLeft &&
                        div1left1 < obstacleLeft + obstacleWidth
                    ) {
                        // Collision detected, handle collision (e.g., game over)
                        console.log('Collision detected');
                        $(this).hide();
                    }
                });
            }, 50);
    
            // Function to add a random obstacle
            function addRandomObstacle() {
                var obstacle = $('<div class="obstacle"></div>');
                obstacle.css('top', Math.random() * 95 + '%'); // Adjust the range as needed
                obstacle.css('left', Math.random() * 95 + '%'); // Adjust the range as needed
                $('body').append(obstacle);
            }
    
            // Add a new obstacle every 3 seconds
            setInterval(addRandomObstacle, 3000);
        });
    </script>
    
    </script>
</body>
</html>
